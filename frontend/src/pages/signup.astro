---
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Sign Up</title>
	<link rel="stylesheet" href="/css/global.css">
  </head>

  <body>	
    <div class="container">
	    <div class="logo">
			<h1>Memories</h1>
			<p>Recorder</p>
		</div>
        
        <div class="index-container">
            <form id="form-signup">
                <input type="text" name="username" placeholder="Enter your username" required>
                <input type="email" name="email" placeholder="Enter your email" required>
                <input type="password" name="password" placeholder="Enter your password" required>

                <button type="submit">Create Account</button>
                <a href="/">Login</a>
            </form>
        </div>
    </div>

	<script>
        const signUpForm = document.getElementById("form-signup") as HTMLFormElement; 
    signUpForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        const formData = new FormData(signUpForm);
        const username = formData.get("username");
        const email = formData.get("email");
        const password = formData.get("password");

        try {
          const res = await fetch("http://localhost:3500/users/signup", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              username,
              email,
              password,
            }),
          });

            const data = await res.json();
            if (!res.ok) {
                alert(data.message || "Sign up failed!");
                return;
            }
            alert("Account created! You can log in now.");
        window.location.href = "/";
        } catch (err) {
        console.error(err);
        alert("Server error!");
        }
        });		
    </script>
 </body>
</html>